<!DOCTYPE HTML>
<html>
<head>
    <meta charset="UTF-8">
    <title>小书书</title>
    <meta name="keywords" content="关键词">
    <meta name="description" content="描述">
    <meta name="author" content="小书书">
    <style>
        body{font-family: "Microsoft YaHei",serif;}
        body,dl,dd,p,h1,h2,h3,h4,h5,h6{margin:0;}
        ol,ul,li{margin:0;padding:0;list-style:none;}
        img{border:none;}
        #wrap{
            width: 100%;
            height: 100%;
        }
        #wrap p{
            position: absolute;
            top: 0;
            left: 0;
            width: 80px;
            height: 80px;
            background-image:radial-gradient(#fff 20%,red 100%);
            border-radius: 50%;
        }

    </style>
</head>
<body>
    <div id="wrap"></div>

    <script>
        (function(){

            let oWrap = document.getElementById("wrap");

            //生成随机小球(5-10个)
            (function(){
                let num = Math.floor(Math.random()*5+5);
                let oF = document.createDocumentFragment();
                for(let i=0;i<num;i++){
                    let oP = document.createElement("p");
                    oF.appendChild(oP);
                }
                oWrap.appendChild(oF);
            })();

            //运动
            (function(){
                !function run(){
                    let oP = [...oWrap.children];
                    let speed = [];
                    //运动速度
                    oP.forEach((ele,index)=>{
                        let speedX = 15 - index,
                            speedY = speedX;
                        speed[index] = {speedX,speedY}
                    });



                    //left和top的最大最小值
                    let maxLeft,maxTop;
                    window.onresize = function r(){
                        maxLeft = window.innerWidth - 80;
                        maxTop = window.innerHeight - 80;
                        return r;
                    }();

                    oP.forEach((ele,index)=>{


                        let left = ele.offsetLeft + speed[index].speedX;
                        let top = ele.offsetTop + speed[index].speedY;

                        if( left >= maxLeft ){
                            left = maxLeft;
                            speed[index].speedX = -speed[index].speedX;
                        }
                        if( left <= 0 ){
                            left = 0;
                            speed[index].speedX = -speed[index].speedX;
                        }
                        if( top >= maxTop ){
                            top = maxTop;
                            speed[index].speedY = -speed[index].speedY;
                        }
                        if( top <= 0 ){
                            top = 0;
                            speed[index].speedY = -speed[index].speedY;
                        }
                        ele.style.left = left + "px";
                        ele.style.top = top + "px";
                    });
                    requestAnimationFrame(run);
                }();

            })();



            // 生成拖尾
            // function createShadow(left,top){
            //     let oP =document.createElement("p");
            //     oP.style.left = left+5 + "px";
            //     oP.style.top = top+5 + "px";
            //     oP.style.transition = "transform .3s,opacity .3s";
            //     setTimeout(()=>{
            //         oP.style.transform = "scale(.4)"
            //         oP.style.opacity = "0"
            //     });
            //     setTimeout(()=>{oShadwow.removeChild(oP)},300);
            //     oShadwow.appendChild(oP);
            // }

        })();
    </script>
</body>
</html>














